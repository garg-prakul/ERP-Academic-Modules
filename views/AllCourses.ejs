<%- include('partials/header') %>
<h2>All Courses</h2>

<form method="GET" action="/all-courses">
  <input type="text" name="search" placeholder="Search..." value="<%= search || '' %>">
  <button type="submit">Search</button>
</form>

<table>
  <thead>
    <tr>
      <th>Course Code</th>
      <th>Course Name</th>
      <th>Instructor Name</th>
      <th>Instructor ID</th>
      <th>Availability</th>
      <th>DC For</th>
      <th>DE For</th>
      <th>IC or Not</th>
      <th>Slot</th>
      <th>Credit</th>
      <th>LTPC</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% courses.forEach(course => { %>
      <tr>
        <td><%= course.course_code %></td>
        <td><%= course.course_name %></td>
        <td><%= course.instructor_name %></td>
        <td><%= course.instructor_id %></td>
        <td><%= course.avail %></td>
        <td><%= course.dcfor.join(", ") %></td>
        <td><%= course.defor.join(", ") %></td>
        <td><%= course.icornot %></td>
        <td><%= course.slot %></td>
        <td><%= course.credit %></td>
        <td><%= course.ltpc %></td>
        <td>
          <a href="/edit-course/<%= course.course_code %>">Edit</a>
          <form method="POST" action="/courses/<%= course.course_code %>?_method=DELETE" style="display:inline;">
            <button type="submit" onclick="return confirm('Are you sure you want to delete this course?');">Delete</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>

<a href="/add-course">Add Course</a>
<%- include('partials/footer') %>
